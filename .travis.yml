language: node_js
node_js:
    - "6"
before_script:
    - npm install -g gulp
script: npm run build
after_success:
    - git remote rm origin
    - git remote add origin https://anyweez:$GITHUB_ACCESS_TOKEN@github.com/anyweez/sorjs.com
    - git pull origin gh-pages
    - git checkout gh-pages
    - find public
    - rm -rf challenges/
    - rm -rf node_modules/
    - cp -r public/* .
    - rm -rf public/
    - find .
    - git add *
    - git push --set-upstream origin gh-pages
    - git config user.name "Travis CI"
    - git config user.email "none@none.com"
    - git commit -a -m "Automated push from Travis"
    - git push
