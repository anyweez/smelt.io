language: node_js
node_js:
    - "6.0"
    - "6.1"
    - "6.2"
    - "6.3"
    - "6.4"
    - "6.5"
    - "6"
env:
    matrix:
        - LOAD_SOR_CMD=(git clone https://github.com/anyweez/sor && cd sor && npm link)
        - LOAD_SOR_CMD=npm install -g sor
before_script:
    - pip install --user awscli
    - export PATH=$PATH:$HOME/.local/bin
    - npm install -g gulp serve
    - $LOAD_SOR_CMD
script: 
    - npm run build
    - serve public &
    - sleep 5
    - scripts/verify_challenges.js
    - scripts/attempt_all.sh
after_success:
    - scripts/deploy.sh
